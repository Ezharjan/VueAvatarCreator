(function(t){function e(e){for(var n,s,c=e[0],o=e[1],u=e[2],p=0,f=[];p<c.length;p++)s=c[p],Object.prototype.hasOwnProperty.call(r,s)&&r[s]&&f.push(r[s][0]),r[s]=0;for(n in o)Object.prototype.hasOwnProperty.call(o,n)&&(t[n]=o[n]);l&&l(e);while(f.length)f.shift()();return i.push.apply(i,u||[]),a()}function a(){for(var t,e=0;e<i.length;e++){for(var a=i[e],n=!0,c=1;c<a.length;c++){var o=a[c];0!==r[o]&&(n=!1)}n&&(i.splice(e--,1),t=s(s.s=a[0]))}return t}var n={},r={app:0},i=[];function s(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.m=t,s.c=n,s.d=function(t,e,a){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)s.d(a,n,function(e){return t[e]}.bind(null,n));return a},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],o=c.push.bind(c);c.push=e,c=c.slice();for(var u=0;u<c.length;u++)e(c[u]);var l=o;i.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"0906":function(t,e,a){},1165:function(t,e,a){},"187b":function(t,e,a){t.exports=a.p+"static/img/rg2.732ad979.png"},"1d27":function(t,e,a){t.exports=a.p+"static/img/rn951.b6a5cb38.png"},"56d7":function(t,e,a){"use strict";a.r(e);a("cadf"),a("551c"),a("f751"),a("097d");var n=a("2b0e"),r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("h1",{staticClass:"pagetitle"},[t._v("头像更换")]),a("app-main",{on:{save:function(e){t.saveImage=e}}}),a("transition",{attrs:{name:"el-zoom-in-top"}},[a("app-save",{directives:[{name:"show",rawName:"v-show",value:""!=t.saveImage,expression:"saveImage!=''"}],attrs:{image:t.saveImage},on:{close:function(e){t.saveImage=""}}})],1),a("footer",{staticClass:"copyright"},[t._v("@BJUT Ezharjan")])],1)},i=[],s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("main",[a("section",{staticClass:"avatar-box"},[a("div",{directives:[{name:"show",rawName:"v-show",value:!t.hasImage,expression:"!hasImage"}],staticClass:"noImage upload-box"},[a("div",{staticClass:"upload-box"},[a("svg",{attrs:{viewBox:"0 0 512 512.00099",xmlns:"http://www.w3.org/2000/svg"}},[a("path",{attrs:{d:"m373.410156 0h-234.816406c-76.421875 0-138.59375 62.171875-138.59375 138.59375v234.8125c0 76.421875 62.171875 138.59375 138.59375 138.59375h234.816406c76.417969 0 138.589844-62.171875 138.589844-138.59375v-234.8125c0-76.421875-62.171875-138.59375-138.589844-138.59375zm108.574219 373.40625c0 59.871094-48.707031 108.578125-108.578125 108.578125h-234.8125c-59.871094 0-108.578125-48.707031-108.578125-108.578125v-1.316406l86.089844-79.25c2.4375-2.242188 6.257812-2.242188 8.695312-.003906l65.875 60.476562c7.640625 7.015625 17.941407 10.441406 28.269531 9.414062 10.324219-1.03125 19.742188-6.4375 25.847657-14.828124l116.25-159.847657c1.542969-2.117187 3.65625-2.558593 4.777343-2.632812 1.121094-.066407 3.273438.085937 5.078126 1.988281l111.082031 117.050781v68.949219zm0-112.550781-89.3125-94.109375c-7.472656-7.875-17.960937-11.984375-28.808594-11.277344-10.832031.707031-20.707031 6.148438-27.09375 14.929688l-116.253906 159.847656c-1.472656 2.023437-3.488281 2.507812-4.558594 2.613281-1.066406.105469-3.136719.035156-4.980469-1.660156l-65.875-60.472657c-13.839843-12.710937-35.503906-12.691406-49.324218.03125l-65.761719 60.535157v-192.699219c0-59.871094 48.707031-108.578125 108.578125-108.578125h234.816406c59.867188 0 108.574219 48.707031 108.574219 108.578125zm0 0"}}),a("path",{attrs:{d:"m142.910156 86.734375c-29.082031 0-52.746094 23.664063-52.746094 52.75 0 29.082031 23.664063 52.746094 52.746094 52.746094 29.085938 0 52.746094-23.664063 52.746094-52.746094.003906-29.085937-23.660156-52.75-52.746094-52.75zm0 75.476563c-12.53125 0-22.730468-10.195313-22.730468-22.730469 0-12.53125 10.199218-22.730469 22.730468-22.730469 12.535156 0 22.730469 10.195312 22.730469 22.730469 0 12.535156-10.195313 22.730469-22.730469 22.730469zm0 0"}})]),t._v("\n                请选择图片\n            ")])]),a("canvas",{ref:"canvas",staticClass:"ccanvas",attrs:{width:"512",height:"512"}}),a("canvas",{ref:"canvas2",staticClass:"fb-canvas",attrs:{width:"512",height:"512"}})]),a("section",{staticClass:"choice-box"},[a("div",{directives:[{name:"hscroll",rawName:"v-hscroll"}],staticClass:"choice-warp"},t._l(t.head,(function(e,n){return a("div",{key:"head"+n,staticClass:"choice-icon",class:{active:t.activeHead==n},on:{click:function(e){t.activeHead=n}}},[a("img",{staticClass:"choice-img",attrs:{src:e.preview}})])})),0)]),a("section",{staticClass:"choice-box"},[a("div",{directives:[{name:"hscroll",rawName:"v-hscroll"}],staticClass:"choice-warp"},t._l(t.icons,(function(e,n){return a("div",{key:"icon"+n,staticClass:"choice-icon",on:{click:function(e){return t.addIcon(n)}}},[a("img",{staticClass:"choice-img",attrs:{src:e.preview}})])})),0)]),a("button",{directives:[{name:"show",rawName:"v-show",value:!t.hasImage,expression:"!hasImage"}],staticClass:"save-btn",on:{click:function(e){return t.$refs.picker.click()}}},[t._v("\n            选择图片\n        ")]),a("section",{directives:[{name:"show",rawName:"v-show",value:t.hasImage,expression:"hasImage"}],staticClass:"save-box"},[a("button",{staticClass:"save-btn save-w50",on:{click:function(e){return t.$refs.picker.click()}}},[t._v("\n            更换头像\n        ")]),a("button",{staticClass:"save-btn save-w50",on:{click:t.saveImage}},[t._v("\n            保存图片\n        ")])]),a("div",{ref:"picker",attrs:{id:"pick-avatar"}}),a("avatar-cropper",{attrs:{mimes:"image/*",trigger:"#pick-avatar","upload-handler":t.getImage}})],1)},c=[],o=(a("ac4d"),a("8a81"),a("1c4c"),a("7f7f"),a("6b54"),a("ac6a"),a("5df3"),a("96cf"),a("1da1")),u=a("a566"),l=a.n(u),p=a("1d27"),f=a.n(p),v=a("bf15"),h=a.n(v),m=a("a1e6"),d=a.n(m),g=a("d90a"),b=a.n(g),w=a("187b"),x=a.n(w),y=a("bc99"),I=a.n(y),C=a("5753"),$=a.n(C),_=a("9bcf"),k=a.n(_),O=a("adc3"),j=a.n(O),S=[{src:$.a,preview:$.a,params:[0,0,512,512]},{src:k.a,preview:k.a,params:[0,0,512,512]},{src:j.a,preview:j.a,params:[0,0,512,512]}],P=[{src:b.a,preview:b.a,x:40,y:40},{src:x.a,preview:x.a,x:60,y:40},{src:I.a,preview:I.a,x:80,y:200},{src:d.a,preview:d.a,x:50,y:200},{src:f.a,preview:f.a,x:50,y:200},{src:h.a,preview:h.a,x:50,y:200}],z=a("920e"),A=a.n(z);function H(t,e){var a;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(a=R(t))||e&&t&&"number"===typeof t.length){a&&(t=a);var n=0,r=function(){};return{s:r,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,c=!1;return{s:function(){a=t[Symbol.iterator]()},n:function(){var t=a.next();return s=t.done,t},e:function(t){c=!0,i=t},f:function(){try{s||null==a.return||a.return()}finally{if(c)throw i}}}}function R(t,e){if(t){if("string"===typeof t)return M(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?M(t,e):void 0}}function M(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,n=new Array(e);a<e;a++)n[a]=t[a];return n}var N={components:{AvatarCropper:l.a},directives:{hscroll:{inserted:function(t,e){A()(t)}}},data:function(){return{hasImage:!1,activeHead:-1,head:S,icons:P}},methods:{getImage:function(t){this.$orignalImage=t.getCroppedCanvas({width:512,height:512}),this.drawIcon()},renewImage:function(){this.$ctx.clearRect(0,0,512,512),this.$orignalImage&&(this.$ctx.drawImage(this.$orignalImage,0,0,512,512),this.hasImage=!0)},drawIcon:function(){this.renewImage(),this.activeHead<0||this.$ctx.drawImage.apply(this.$ctx,[this.$headImg[this.activeHead]].concat(this.head[this.activeHead].params))},saveImage:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=this.$fb.toDataURL("image/png"),t.next=3,this.loadImg(e);case 3:a=t.sent,this.$ctx.drawImage(a,0,0,512,512),n=this.$refs.canvas.toDataURL("image/png"),this.$emit("save",n),this.drawIcon();case 8:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),loadImg:function(t){return new Promise((function(e,a){var n=new Image;n.onload=function(){e(n)},n.onerror=a,n.src=t}))},addIcon:function(t){var e=new fabric.Image(this.$iconImg[t],{left:this.icons[t].x,top:this.icons[t].y});e.cornerSize=30,e.rotatingPointOffset=50,e.transparentCorners=!1,this.$fb.add(e)}},mounted:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e,a,n,r,i,s,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$nextTick();case 2:this.$ctx=this.$refs.canvas.getContext("2d"),this.$fb=new fabric.Canvas(this.$refs.canvas2),e=[],a=H(this.head);try{for(a.s();!(n=a.n()).done;)r=n.value,e.push(this.loadImg(r.src))}catch(o){a.e(o)}finally{a.f()}return t.next=9,Promise.all(e);case 9:this.$headImg=t.sent,i=[],s=H(this.icons);try{for(s.s();!(c=s.n()).done;)r=c.value,i.push(this.loadImg(r.src))}catch(o){s.e(o)}finally{s.f()}return t.next=15,Promise.all(i);case 15:this.$iconImg=t.sent;case 16:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),watch:{activeHead:function(){this.drawIcon()}}},T=N,E=(a("9bcc"),a("b4a6"),a("2877")),U=Object(E["a"])(T,s,c,!1,null,"d5243078",null),J=U.exports,B=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"save-wrap"},[a("div",{staticClass:"save-box"},[a("div",{staticClass:"save-image"},[a("h2",[t._v("长按下方图片保存")]),a("img",{attrs:{src:t.image,alt:"长按图片保存"}}),a("button",{staticClass:"save-close-btn",on:{click:function(e){return t.$emit("close")}}},[t._v("\n                关闭\n            ")])])])])},D=[],L={props:{image:{type:String,default:""}}},q=L,F=(a("f222"),Object(E["a"])(q,B,D,!1,null,"065f9fd0",null)),G=F.exports,K={name:"app",data:function(){return{saveImage:""}},components:{appMain:J,appSave:G}},Q=K,V=(a("5c0b"),Object(E["a"])(Q,r,i,!1,null,null,null)),W=V.exports;a("450d"),a("d455");n["a"].config.productionTip=!1,new n["a"]({render:function(t){return t(W)}}).$mount("#app")},5753:function(t,e,a){t.exports=a.p+"static/img/n1.9b994d18.png"},"5c0b":function(t,e,a){"use strict";var n=a("e332"),r=a.n(n);r.a},"9bcc":function(t,e,a){"use strict";var n=a("1165"),r=a.n(n);r.a},"9bcf":function(t,e,a){t.exports=a.p+"static/img/n2.ea5eb416.png"},a1e6:function(t,e,a){t.exports=a.p+"static/img/rn95.05239f38.png"},adc3:function(t,e,a){t.exports=a.p+"static/img/n3.c61416fb.png"},b4a6:function(t,e,a){"use strict";var n=a("e701"),r=a.n(n);r.a},bc99:function(t,e,a){t.exports=a.p+"static/img/rg3.a7028b54.png"},bf15:function(t,e,a){t.exports=a.p+"static/img/rn952.84f2bb90.png"},d90a:function(t,e,a){t.exports=a.p+"static/img/rg1.4eed2e0c.png"},e332:function(t,e,a){},e701:function(t,e,a){},f222:function(t,e,a){"use strict";var n=a("0906"),r=a.n(n);r.a}});
//# sourceMappingURL=app.78d2e6c7.js.map